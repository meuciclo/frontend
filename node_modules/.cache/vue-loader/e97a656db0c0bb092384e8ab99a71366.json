{"remainingRequest":"/home/gabriel/Vue Projects/meuciclo/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/gabriel/Vue Projects/meuciclo/src/views/Home.vue?vue&type=template&id=fae5bece","dependencies":[{"path":"/home/gabriel/Vue Projects/meuciclo/src/views/Home.vue","mtime":1621109275738},{"path":"/home/gabriel/Vue Projects/meuciclo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/gabriel/Vue Projects/meuciclo/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/gabriel/Vue Projects/meuciclo/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1616796459000},{"path":"/home/gabriel/Vue Projects/meuciclo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/gabriel/Vue Projects/meuciclo/node_modules/vue-loader-v16/dist/index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgPGRpdiBjbGFzcz0iaG9tZSI+CiAgICA8dGVtcGxhdGUgdi1pZj0icmVnaXN0ZXJzLmxlbmd0aCI+CiAgICAgIDxDb3VudGluZyA6ZGF5cz0iZGF5cyIgOmlzQ291bnRpbmc9ImlzQ291bnRpbmciIC8+CiAgICA8L3RlbXBsYXRlPgogICAgPHRlbXBsYXRlIHYtZWxzZT4KICAgICAgPHNwYW4gY2xhc3M9Im5vUmVnaXN0ZXJzIj5Db21lY2UgYSByZWdpc3RyYXIgYXBlcnRhbmRvIG8gYm90w6NvIGFiYWl4bzwvc3Bhbj4KICAgIDwvdGVtcGxhdGU+CiAgICA8UmVnaXN0ZXIgOmlzQ291bnRpbmc9ImlzQ291bnRpbmciIEBjbGljaz0icmVnaXN0ZXIiLz4KICA8L2Rpdj4K"},{"version":3,"sources":["/home/gabriel/Vue Projects/meuciclo/src/views/Home.vue"],"names":[],"mappings":";EACE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAC/B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IACnD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACd,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC7E,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACvD,CAAC,CAAC,CAAC,CAAC,CAAC","file":"/home/gabriel/Vue Projects/meuciclo/src/views/Home.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"home\">\n    <template v-if=\"registers.length\">\n      <Counting :days=\"days\" :isCounting=\"isCounting\" />\n    </template>\n    <template v-else>\n      <span class=\"noRegisters\">Comece a registrar apertando o bot√£o abaixo</span>\n    </template>\n    <Register :isCounting=\"isCounting\" @click=\"register\"/>\n  </div>\n</template>\n\n<script>\nimport Counting from '@/components/homePage/Counting'\nimport Register from '@/components/homePage/Register'\n\nexport default {\n  name: 'Home',\n  components: {\n    Counting,\n    Register\n  },\n  data: function () {\n    return {\n      registers: [],\n      lastRegister: {},\n      isCounting: false,\n      days: '0'\n    }\n  },\n  methods: {\n    getRegisters: async function () {\n      if (localStorage.registers) {\n        this.registers = JSON.parse(localStorage.getItem('registers'))\n      } else {\n        this.registers = []\n      }\n    },\n    getLastRegister: async function () {\n      if (this.registers.length > 0) {\n        const lastPos = this.registers.length - 1\n        this.lastRegister = this.registers[lastPos]\n      }\n    },\n    checkIsCounting: function () {\n      const register = this.lastRegister\n      if (register.begin) {\n        if (register.begin !== '' && (!register.end || register.end === '')) {\n          this.isCounting = true\n          return\n        }\n      }\n      this.isCounting = false\n    },\n    countDays: async function () {\n      const register = this.lastRegister\n      if (register.end && register.end === '') {\n        this.days = await this.calcularData(register.end)\n      } else if (register.begin && register.begin !== '') {\n        this.days = await this.calcularData(register.begin)\n      } else {\n        this.days = '0'\n      }\n    },\n    calcularData: async function (timestamp) {\n      const _MS_PER_DAY = 1000 * 60 * 60 * 24;\n      const dateDiffInDays = function (a, b) {\n        const utc1 = Date.UTC(a.getFullYear(), a.getMonth(), a.getDate())\n        const utc2 = Date.UTC(b.getFullYear(), b.getMonth(), b.getDate())\n        return Math.floor((utc2 - utc1) / _MS_PER_DAY)\n      }\n      const lastRegister = new Date(timestamp)\n      const now = new Date(Date.now())\n      return '' + dateDiffInDays(lastRegister, now)\n    },\n    register: async function () {\n      if (this.isCounting) {\n        this.lastRegister.end = Date.now()\n      } else {\n        const newRegister = {}\n        newRegister.begin = Date.now()\n        this.registers.push(newRegister)\n        this.lastRegister = newRegister\n      }\n      localStorage.registers = JSON.stringify(this.registers)\n      this.checkIsCounting()\n      this.countDays()\n    }\n  },\n  mounted: async function () {\n    await this.getRegisters()\n    await this.getLastRegister()\n    this.checkIsCounting()\n    this.countDays()\n  }\n}\n</script>\n"]}]}