{"remainingRequest":"/home/gabriel/Vue Projects/meuciclo/node_modules/babel-loader/lib/index.js!/home/gabriel/Vue Projects/meuciclo/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/home/gabriel/Vue Projects/meuciclo/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/gabriel/Vue Projects/meuciclo/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/gabriel/Vue Projects/meuciclo/src/views/Home.vue?vue&type=template&id=fae5bece","dependencies":[{"path":"/home/gabriel/Vue Projects/meuciclo/src/views/Home.vue","mtime":1621109275738},{"path":"/home/gabriel/Vue Projects/meuciclo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/gabriel/Vue Projects/meuciclo/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/gabriel/Vue Projects/meuciclo/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1616796459000},{"path":"/home/gabriel/Vue Projects/meuciclo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/gabriel/Vue Projects/meuciclo/node_modules/vue-loader-v16/dist/index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVzb2x2ZUNvbXBvbmVudCBhcyBfcmVzb2x2ZUNvbXBvbmVudCwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUJsb2NrIGFzIF9jcmVhdGVCbG9jaywgY3JlYXRlQ29tbWVudFZOb2RlIGFzIF9jcmVhdGVDb21tZW50Vk5vZGUsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSB9IGZyb20gInZ1ZSI7CnZhciBfaG9pc3RlZF8xID0gewogIGNsYXNzOiAiaG9tZSIKfTsKdmFyIF9ob2lzdGVkXzIgPSB7CiAga2V5OiAxLAogIGNsYXNzOiAibm9SZWdpc3RlcnMiCn07CmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgdmFyIF9jb21wb25lbnRfQ291bnRpbmcgPSBfcmVzb2x2ZUNvbXBvbmVudCgiQ291bnRpbmciKTsKCiAgdmFyIF9jb21wb25lbnRfUmVnaXN0ZXIgPSBfcmVzb2x2ZUNvbXBvbmVudCgiUmVnaXN0ZXIiKTsKCiAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKCJkaXYiLCBfaG9pc3RlZF8xLCBbX2N0eC5yZWdpc3RlcnMubGVuZ3RoID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9jb21wb25lbnRfQ291bnRpbmcsIHsKICAgIGtleTogMCwKICAgIGRheXM6IF9jdHguZGF5cywKICAgIGlzQ291bnRpbmc6IF9jdHguaXNDb3VudGluZwogIH0sIG51bGwsIDgKICAvKiBQUk9QUyAqLwogICwgWyJkYXlzIiwgImlzQ291bnRpbmciXSkpIDogKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKCJzcGFuIiwgX2hvaXN0ZWRfMiwgIkNvbWVjZSBhIHJlZ2lzdHJhciBhcGVydGFuZG8gbyBib3TDo28gYWJhaXhvIikpLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9SZWdpc3RlciwgewogICAgaXNDb3VudGluZzogX2N0eC5pc0NvdW50aW5nLAogICAgb25DbGljazogJG9wdGlvbnMucmVnaXN0ZXIKICB9LCBudWxsLCA4CiAgLyogUFJPUFMgKi8KICAsIFsiaXNDb3VudGluZyIsICJvbkNsaWNrIl0pXSk7Cn0="},{"version":3,"sources":["/home/gabriel/Vue Projects/meuciclo/src/views/Home.vue"],"names":[],"mappings":";;AACO,EAAA,KAAK,EAAC;;;;AAKD,EAAA,KAAK,EAAC;;;;;;;uBALhB,YAAA,CAQM,KARN,EAAA,UAAA,EAQM,CAPY,IAAA,CAAA,SAAA,CAAU,M,kBACxB,YAAA,CAAkD,mBAAlD,EAAkD;UAAA;AAAvC,IAAA,IAAI,EAAE,IAAA,CAAA,IAAiC;AAA1B,IAAA,UAAU,EAAE,IAAA,CAAA;AAAc,GAAlD,E,IAAA,E;;AAAA,I,sBAAA,C,mBAGA,YAAA,CAA4E,MAA5E,EAAA,UAAA,EAA0B,6CAA1B,C,CAGE,EADJ,YAAA,CAAsD,mBAAtD,EAAsD;AAA3C,IAAA,UAAU,EAAE,IAAA,CAAA,UAA+B;AAAlB,IAAA,OAAK,EAAE,QAAA,CAAA;AAAW,GAAtD,E,IAAA,E;;AAAA,I,yBAAA,CACI,CARN,C","sourcesContent":["<template>\n  <div class=\"home\">\n    <template v-if=\"registers.length\">\n      <Counting :days=\"days\" :isCounting=\"isCounting\" />\n    </template>\n    <template v-else>\n      <span class=\"noRegisters\">Comece a registrar apertando o bot√£o abaixo</span>\n    </template>\n    <Register :isCounting=\"isCounting\" @click=\"register\"/>\n  </div>\n</template>\n\n<script>\nimport Counting from '@/components/homePage/Counting'\nimport Register from '@/components/homePage/Register'\n\nexport default {\n  name: 'Home',\n  components: {\n    Counting,\n    Register\n  },\n  data: function () {\n    return {\n      registers: [],\n      lastRegister: {},\n      isCounting: false,\n      days: '0'\n    }\n  },\n  methods: {\n    getRegisters: async function () {\n      if (localStorage.registers) {\n        this.registers = JSON.parse(localStorage.getItem('registers'))\n      } else {\n        this.registers = []\n      }\n    },\n    getLastRegister: async function () {\n      if (this.registers.length > 0) {\n        const lastPos = this.registers.length - 1\n        this.lastRegister = this.registers[lastPos]\n      }\n    },\n    checkIsCounting: function () {\n      const register = this.lastRegister\n      if (register.begin) {\n        if (register.begin !== '' && (!register.end || register.end === '')) {\n          this.isCounting = true\n          return\n        }\n      }\n      this.isCounting = false\n    },\n    countDays: async function () {\n      const register = this.lastRegister\n      if (register.end && register.end === '') {\n        this.days = await this.calcularData(register.end)\n      } else if (register.begin && register.begin !== '') {\n        this.days = await this.calcularData(register.begin)\n      } else {\n        this.days = '0'\n      }\n    },\n    calcularData: async function (timestamp) {\n      const _MS_PER_DAY = 1000 * 60 * 60 * 24;\n      const dateDiffInDays = function (a, b) {\n        const utc1 = Date.UTC(a.getFullYear(), a.getMonth(), a.getDate())\n        const utc2 = Date.UTC(b.getFullYear(), b.getMonth(), b.getDate())\n        return Math.floor((utc2 - utc1) / _MS_PER_DAY)\n      }\n      const lastRegister = new Date(timestamp)\n      const now = new Date(Date.now())\n      return '' + dateDiffInDays(lastRegister, now)\n    },\n    register: async function () {\n      if (this.isCounting) {\n        this.lastRegister.end = Date.now()\n      } else {\n        const newRegister = {}\n        newRegister.begin = Date.now()\n        this.registers.push(newRegister)\n        this.lastRegister = newRegister\n      }\n      localStorage.registers = JSON.stringify(this.registers)\n      this.checkIsCounting()\n      this.countDays()\n    }\n  },\n  mounted: async function () {\n    await this.getRegisters()\n    await this.getLastRegister()\n    this.checkIsCounting()\n    this.countDays()\n  }\n}\n</script>\n"],"sourceRoot":""}]}